{"version":3,"sources":["main.js"],"names":["latRes","lngRes","myMap","marker","FORM","document","querySelector","LOADING","API_KEY_GEOLOCATION","BY_IP","BY_DOMAIN","BY_EMAIL","ip","ipGeolocationApi","concat","urlGeo","ipRes","cityRes","uniCodeRes","postalCodeRes","timezoneRes","ispRes","showLocation","setView","L","addTo","tileLayer","attribution","maxZoom","id","tileSize","zoomOffset","accessToken","_icon","src","style","width","height","marginLeft","marginTop","getGeolocation","visibility","opacity","fetch","then","res","json","innerHTML","location","city","country","postalCode","timezone","isp","lat","lng","error","alert","navigator","geolocation","getCurrentPosition","getUserPos","coords","latitude","longitude","errorUserPos","console","log","window","addEventListener","position","map","e","preventDefault","value","trim","toLowerCase","includes"],"mappings":"aACA,IAiBAA,OAAAC,OAAAC,MAAAC,OAjBAC,KAAAC,SAAAC,cAAA,SACAC,QAAAF,SAAAC,cAAA,YACAE,oBAAA,mCACAC,MAAA,aACAC,UAAA,UACAC,SAAA,SAGAC,GAAAP,SAAAC,cAAA,YACAO,iBAAA,oDAAAC,OAAAN,oBAAA,KACAO,OAAAF,iBACAG,MAAAX,SAAAC,cAAA,UACAW,QAAAZ,SAAAC,cAAA,YACAY,WAAAb,SAAAC,cAAA,UACAa,cAAAd,SAAAC,cAAA,kBACAc,YAAAf,SAAAC,cAAA,gBACAe,OAAAhB,SAAAC,cAAA,WAGA,SAAAgB,eAEApB,MAAAqB,QAAA,CAAAvB,OAAAC,QAAA,IACAE,OAAAqB,EAAArB,OAAA,CAAAH,OAAAC,SAAAwB,MAAAvB,OAEAsB,EAAAE,UAAA,qFAAA,CACAC,YAAA,2JACAC,QAAA,GACAC,GAAA,oBACAC,SAAA,IACAC,YAAA,EACAC,YAAA,sGACAP,MAAAvB,OAGAC,OAAA8B,MAAAC,IAAA,mCACA/B,OAAA8B,MAAAE,MAAAC,MAAA,OACAjC,OAAA8B,MAAAE,MAAAE,OAAA,OACAlC,OAAA8B,MAAAE,MAAAG,WAAA,UACAnC,OAAA8B,MAAAE,MAAAI,UAAA,WAIA,IAAAC,eAAA,WAEAjC,QAAA4B,MAAAM,WAAA,UACAlC,QAAA4B,MAAAO,QAAA,IAEAC,MAAA5B,QACA6B,KAAA,SAAAC,GAAA,OAAAA,EAAAC,SACAF,KAAA,SAAAC,GACA7B,MAAA+B,UAAAF,EAAAjC,GACAK,QAAA8B,UAAAF,EAAAG,SAAAC,KACA/B,WAAA6B,UAAAF,EAAAG,SAAAE,QACA/B,cAAA4B,UAAAF,EAAAG,SAAAG,WACA/B,YAAA2B,UAAA,MAAAF,EAAAG,SAAAI,SACA/B,OAAA0B,UAAAF,EAAAQ,IACArD,OAAA6C,EAAAG,SAAAM,IACArD,OAAA4C,EAAAG,SAAAO,IACAhD,QAAA4B,MAAAM,WAAA,SACAlC,QAAA4B,MAAAO,QAAA,IACApB,iBAbA,MAeA,SAAAkC,GACAC,MAAA,qCACAlD,QAAA4B,MAAAM,WAAA,SACAiB,UAAAC,YAAAC,mBACA,SAAAC,GACA7D,OAAA6D,EAAAC,OAAAC,SACA9D,OAAA4D,EAAAC,OAAAE,UACA9D,MAAAqB,QAAA,CAAAvB,OAAAC,QAAA,KAEA,SAAAgE,GACAC,QAAAC,IAAAF,QAMAG,OAAAC,iBAAA,OAAA,WAaAX,UAAAC,YAAAC,mBAXA,SAAAU,GACAtE,OAAAsE,EAAAR,OAAAC,SACA9D,OAAAqE,EAAAR,OAAAE,UACA9D,MAAAsB,EAAA+C,IAAA,OAAAhD,QAAA,CAAAvB,OAAAC,QAAA,IACAuC,kBAGA,SAAAgB,GACAU,QAAAC,IAAAX,OAOApD,KAAAiE,iBAAA,SAAA,SAAAG,GAKA,GAHAA,EAAAC,iBACA7D,GAAA8D,MAAA9D,GAAA8D,MAAAC,OAAAC,cAEAhE,GAAA8D,MAAAG,SAAA,QACA9D,OAAAF,iBAAAH,UAAAE,GAAA8D,WACA,GAAA9D,GAAA8D,MAAAG,SAAA,KACA9D,OAAAF,iBAAAF,SAAAC,GAAA8D,UACA,CAAA,GAAA,KAAA9D,GAAA8D,MACA,OAAAjB,MAAA,8BAEA1C,OAAAF,iBAAAJ,MAAAG,GAAA8D,MAGAlC,iBAEA5B,GAAA8D,MAAA","file":"main.min.js","sourcesContent":["// Const\r\nconst FORM = document.querySelector('#form');\r\nconst LOADING = document.querySelector('#loading');\r\nconst API_KEY_GEOLOCATION = 'at_8fVFRgj29d0wZYsQ5lGFy650uDD8w';\r\nconst BY_IP = 'ipAddress=';\r\nconst BY_DOMAIN = 'domain=';\r\nconst BY_EMAIL = 'email=';\r\n\r\n// Let\r\nlet ip = document.querySelector('#ipInput');\r\nlet ipGeolocationApi = `https://geo.ipify.org/api/v2/country,city?apiKey=${API_KEY_GEOLOCATION}&`;\r\nlet urlGeo = ipGeolocationApi;\r\nlet ipRes = document.querySelector('#ipRes');\r\nlet cityRes = document.querySelector('#cityRes');\r\nlet uniCodeRes = document.querySelector('#UCRes');\r\nlet postalCodeRes = document.querySelector('#postalCodeRes');\r\nlet timezoneRes = document.querySelector('#timezoneRes');\r\nlet ispRes = document.querySelector('#ispRes');\r\nlet latRes, lngRes, myMap, marker;\r\n\r\nfunction showLocation() {\r\n\r\n    myMap.setView([latRes,lngRes], 14);\r\n    marker = L.marker([latRes, lngRes]).addTo(myMap);\r\n\r\n    L.tileLayer(`https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}`, {\r\n        attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery Â© <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n        maxZoom: 18,\r\n        id: 'mapbox/streets-v9',\r\n        tileSize: 512,\r\n        zoomOffset: -1,\r\n        accessToken: 'pk.eyJ1Ijoic2ltb25lbWFuZG9sYSIsImEiOiJja3djYTY3cmkzc3dtMzByb2NnaXFqdGd3In0.LkO9Y9a2d2o50nNLp476eQ'\r\n    }).addTo(myMap);\r\n\r\n    // Change marker icon and style\r\n    marker._icon.src = './fonts/icons/uEA02-location.svg';\r\n    marker._icon.style.width = '3rem';\r\n    marker._icon.style.height = 'auto';\r\n    marker._icon.style.marginLeft = '-1.5rem';\r\n    marker._icon.style.marginTop = '-3.06rem';\r\n}\r\n\r\n// Get Geolocation on Submit\r\nconst getGeolocation = ()=> {\r\n\r\n    LOADING.style.visibility = 'visible';\r\n    LOADING.style.opacity = '1';\r\n\r\n    fetch(urlGeo)\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            ipRes.innerHTML = res.ip;\r\n            cityRes.innerHTML = res.location.city;\r\n            uniCodeRes.innerHTML = res.location.country;\r\n            postalCodeRes.innerHTML = res.location.postalCode;\r\n            timezoneRes.innerHTML = 'UTC' + res.location.timezone;\r\n            ispRes.innerHTML = res.isp;\r\n            latRes = res.location.lat;\r\n            lngRes = res.location.lng;\r\n            LOADING.style.visibility = 'hidden';\r\n            LOADING.style.opacity = '0';\r\n            showLocation();\r\n        })\r\n        .catch(error => {\r\n            alert('Insert valid IP, domain or email!');\r\n            LOADING.style.visibility = 'hidden';\r\n            navigator.geolocation.getCurrentPosition(\r\n                getUserPos =>{\r\n                    latRes = getUserPos.coords.latitude;\r\n                    lngRes = getUserPos.coords.longitude;\r\n                    myMap.setView([latRes,lngRes], 12);\r\n                },\r\n                    errorUserPos => {\r\n                        console.log(errorUserPos);\r\n            });\r\n        });\r\n}\r\n\r\n// Get Geolocation On load\r\nwindow.addEventListener('load', ()=>{\r\n\r\n    function getUserPos(position) {\r\n        latRes = position.coords.latitude;\r\n        lngRes = position.coords.longitude;\r\n        myMap = L.map('map').setView([latRes,lngRes], 14);\r\n        getGeolocation();\r\n    }\r\n\r\n    function errorUserPos(error) {\r\n        console.log(error);\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(getUserPos, errorUserPos);\r\n});\r\n\r\n// Event listener on form submit\r\nFORM.addEventListener('submit',(e)=>{\r\n\r\n    e.preventDefault();\r\n    ip.value = ip.value.trim().toLowerCase();\r\n\r\n    if(ip.value.includes('www.')) {\r\n        urlGeo = ipGeolocationApi + BY_DOMAIN + ip.value;\r\n    } else if (ip.value.includes('@')) {\r\n        urlGeo = ipGeolocationApi + BY_EMAIL + ip.value;\r\n    } else if (ip.value === \"\") {\r\n        return alert('Insert valid IP or domain!');\r\n    } else {\r\n        urlGeo = ipGeolocationApi + BY_IP + ip.value;\r\n    }\r\n\r\n    getGeolocation();\r\n\r\n    ip.value = \"\"\r\n});"]}