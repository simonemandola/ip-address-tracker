"use strict";var latRes,lngRes,myMap,marker,FORM=document.querySelector("#form"),LOADING=document.querySelector("#loading"),API_KEY_GEOLOCATION="at_8fVFRgj29d0wZYsQ5lGFy650uDD8w",BY_IP="ipAddress=",BY_DOMAIN="domain=",BY_EMAIL="email=",ip=document.querySelector("#ipInput"),ipGeolocationApi="https://geo.ipify.org/api/v2/country,city?apiKey=".concat(API_KEY_GEOLOCATION,"&"),urlGeo=ipGeolocationApi,ipRes=document.querySelector("#ipRes"),cityRes=document.querySelector("#cityRes"),uniCodeRes=document.querySelector("#UCRes"),postalCodeRes=document.querySelector("#postalCodeRes"),timezoneRes=document.querySelector("#timezoneRes"),ispRes=document.querySelector("#ispRes");function showLocation(){myMap.setView([latRes,lngRes],14),marker=L.marker([latRes,lngRes]).addTo(myMap),L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v9",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1Ijoic2ltb25lbWFuZG9sYSIsImEiOiJja3djYTY3cmkzc3dtMzByb2NnaXFqdGd3In0.LkO9Y9a2d2o50nNLp476eQ"}).addTo(myMap),marker._icon.src="./fonts/icons/uEA02-location.svg",marker._icon.style.width="3rem",marker._icon.style.height="auto",marker._icon.style.marginLeft="-1.5rem",marker._icon.style.marginTop="-3.06rem"}var getGeolocation=function(){LOADING.style.visibility="visible",LOADING.style.opacity="1",fetch(urlGeo).then(function(e){return e.json()}).then(function(e){ipRes.innerHTML=e.ip,cityRes.innerHTML=e.location.city,uniCodeRes.innerHTML=e.location.country,postalCodeRes.innerHTML=e.location.postalCode,timezoneRes.innerHTML="UTC"+e.location.timezone,ispRes.innerHTML=e.isp,latRes=e.location.lat,lngRes=e.location.lng,LOADING.style.visibility="hidden",LOADING.style.opacity="0",showLocation()}).catch(function(e){alert("Insert valid IP, domain or email!"),LOADING.style.visibility="hidden",navigator.geolocation.getCurrentPosition(function(e){latRes=e.coords.latitude,lngRes=e.coords.longitude,myMap.setView([latRes,lngRes],12)},function(e){console.log(e)})})};window.addEventListener("load",function(){navigator.geolocation.getCurrentPosition(function(e){latRes=e.coords.latitude,lngRes=e.coords.longitude,myMap=L.map("map").setView([latRes,lngRes],14),getGeolocation()},function(e){console.log(e)})}),FORM.addEventListener("submit",function(e){if(e.preventDefault(),ip.value=ip.value.trim().toLowerCase(),ip.value.includes("www."))urlGeo=ipGeolocationApi+BY_DOMAIN+ip.value;else if(ip.value.includes("@"))urlGeo=ipGeolocationApi+BY_EMAIL+ip.value;else{if(""===ip.value)return alert("Insert valid IP or domain!");urlGeo=ipGeolocationApi+BY_IP+ip.value}getGeolocation(),ip.value=""});
//# sourceMappingURL=main.min.js.map
